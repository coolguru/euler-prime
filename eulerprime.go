package eulerprime

import (
	"errors"
	"log"
	"math"
	"strconv"
)

const euler string = "2718281828459045235360287471352662497757247093699959574966967627724076630353547594571382178525166427427466391932003059921817413596629043572900334295260595630727310085323780527510636864870169531418655274845908244955045339286497642774136641659646366325087360915841343970999831703538233800921168146554153749305420222461709321230949167763499311130703029256989342067643919136650384873578846610775725576307921898867353790419412043377406494907073863079049248976437069836297366862198429250767700214157406500293826954406871877954270969766247465243666295138572019208303177269234097701656745392257779147341603684935723103304485761429026633263529379734450400061311941647086898259755208734782937085387009434178080656799728070459503917013351431243873005220184059659629058572148124084211850064775039817941961218573369359733233622726060251817838892702513619492060782438693702337481448420171570722149985465615180999550898705968511200597021796914132586692866023173102297972906878322083522441391599061859314582147034788154451664798325046262522680294449747348465327518061648320621808534750359139800448221992875411542176030730829809380592059487707728915027609467934303908960025805962459010909038635673645454384379445704592185509465533601046992196262694101269104589034064772338351363261762474219705950177229749539755185497941589667406886010873984437009140128016867265934271635523028216602477719088370948158696452056668815969321410949439503674072209706019571063864125657863462531390320535926139806546127942661318183649945390052760881552590057954589051695900164805070250964031433306971348461644377230682705223338916936933439077004977856509664344052325996256928278405152469924949198823766952739854288105544527565986294752452056933581191153335430197007167698646830306345264029945689325513418879810263822843693783432310455460084376713678585540041637300910512388440410273740721407608914634959207062805000907414543257422897077374359271683851405083456916856940200696280691429777012723803830019742728070149097923863899795993612104605466132878158380106008513525733886057866008226873313592611944487920707602483719175378078444093479419423995579464945674756628701559497832841333591914786214637356031571237159725252350813409928828504345475047296942740099934852852123597391767448810338387716914759902881509278227369735644747653117163207158108127055255988518565028074700044300532710669852024125939726343960013017817542817228069901570199741811225035737309290579234828991587633111179579525578091837379320512692403578245954611317851149686396399914761022707146652278022890556810895090146736930196174130025404517196793385306069511899147940409256879369338070338441179602107573416577508876356755541908556346324123435568308225235273712217105503387342646635300259679114329308264293528681728967169757966418436808935072185358401106548261798586943754287472369322872560907735908395908391091460142614117072184462117369425231608550325954157093031897697899281462993247498822840924014854661208455758417092419430402015069186136627878107412632819743716665163300081707608846958908520480590307092798498619986038385168002115445309269821126322295372352374931397388810054183308214656110010971146679618154212799445076235099916977658728501385580985438616207865146047255866541716806751679188638591131083121667535786975116054522361225000236891529335900786799672114522123922290098658574120910961465211460661599806140981235585382519904891440442062925925495112139384134252979654512252377847573748760543708287671195154844747383508160157351009213329306356054449252038801546741648537732269492082211953049363713694282404348581540485997652964031486199083921249531475754753324051246258895712168695515636092065170164532740822849098401495912212661920197042515154210673013640542646030186192840107095300278713215958912957724597357283841662968309122105168067207572204782349575538780981976238848671652762064340046711544927697250480660380146624193025161061045950219756822986117002086519032370669831556231482887235352603108392944676290571519192882453854919391521106996008043237033684427165463758461688160355511644363832742245956811161693438212701845186156557614161013728389791079422157793758786841154418455264462843002860828405614565145085097678489064642723633070628029478321647090193520218183692763368807386185859693840803315412806281073516311265184978442850706852426699758841232701096926445944070180591783670477391809416566200794197171226876901657574252768490925939008291815463276730122782653097210726947116495871801032373083360370941247180027479717633530219752702123942230297246551354702008732653260880106965168231695765374186656123070274657757097918959211067216395819318091019357262240138979571594510928768813979234045832681877376433987660178768467826282141951356879442805074876594180909317500933229293703777274700932180411535318264065311717806225930701274300352804009239982462788413499286070031074617098467808566025614617192548738073044509118751558201151779313371028983322920327758678025091395169983370486068757944152207043988849229199400201294313834314692872677083681404480986230206993613730660473248727695273521560257818607833251900314636103746032976917370886437834041073098904430285052125115690788024756344066927991823210510958123597257937189860481889740204535362403205812846571530651425291249204243947661486687708328671812115128914373801049519199147537532931250267542902206790327004738901758137411520731783829875119152758426735040751711054714194192324697484869313187371470645344043974387913840094933235840348249950919498420967351718452360532139858889236971502319992247245941513354888002138472469153847094318386470301107021738710470270313959354375155432664989932633857184225826139153169260767022486795866552229787679595391028518903989021263421616979159330165276969103518713133047990903094329029249914628420541512490428251645674693274621461690264705749005925674021242917056177904568195063094543131521847664724047366951937042095397289099855767216362437052762640905908304543796725026790914924542579120860441338520678590027543116899049063921955370027105818216612975571073213954866373070339848665183771444369369480523976858199390808612513000270163816026450091916183618896805640664707051347049361667408241621706481772590630197958443972272171843656472316231680270512046751129103103526136554440801510241033924849273701833862401913354665493043834831381548828728655343791539697505176626178810067645315090761240203654377248976565316875366959861393114641560840789379580749217548437227323155770589454850832823166254130256427171611575544774997441224243993883274759254403869584854298041515014362996853259360147697713332782567993004007175434345215617704392510090975108848087733170821936964764650841822244492410712117344264039706524581581526973270281414315186959263778428980663510467346428841265110885224631075683457878504930178218225174460500041466882994355935522278641033817469626394254500139506953702358631110687103360364199282549637547556611812399933445927038659184541638137264815230049384803290091965126675596838778257921990026093327730060302038191205447473075865273513891589520992388057333363975767184807782646421490529836209478169699172915007977097858943351005478230368908136396071156543341987190535168734752631783851814430979644887878785718990707589067054658544435461194598811093414735359825009456757483011781721620847146141893291961469493470306763972987723322324453411051995252289324936243086076584607853328020388643625697802702792148665178441664055725072156401901023676418513333803139797562192289727683806812618587799679141753492017481517167449135132565785685029510833584297809136395053727848617771983290354188250603562852158316159055091186345022334351945324144525317749505814541594547678969262358490696443311895383174510352758708271212981858009243543830381051517418058078899984580631042495337591094762637632949017938803529523129067651391537272995328629369956730072056740076487607846839313382141066484557572162685904838936171110781104615528795344356112226649956659784035933910764838551152739021256100763830358119151783051993496819479915082392479782967650501768646964257960281471100407585359604523309962347485350677289284632970184431527197085081286106985690573223295367005888075920350341430343600157174473292781502391757887947312865926636316042126795635691228282119510586536161249244064369095864500845511321589618532587572544297576556384231892644160760000151777305609418077478669088800412906959327128963860675191188386443062383698519828564595154255639683325424957038828273369599087352188013818277514390458919247613316334001807369271619250148169382222374126875014028010303314218622690364578926205187634208501209144732217328210320363811846439685870293055833039185801094731023496285350230356999587871675761253060333384854020947827473649510070752377361816329226073739378902562468321865675439646960452427148754101498994468898956060485426243616680157799303275578481736989107749824707383344702452334843119890721222549715588257895274747645757635655586057909769165036383994176295514220082474314305216853172774430602210206147858651829252433566492840524120510139500666972342751669874402123381540601013740792395849134293037359570953001060974089996189871295521695447634341025819464069898942030503287942756813429760863306393721608244279102841802596142198854243553372619756728839042776695026783656807516269448233053600297161311517954960480081510103759243696856094894001139222873705396028826060269848058131712469307843008619454576019436916251624924008021522418733078591512813778909627350783477132979474986858755977337247555623811267459655023190185268672656544727742496202475797531643318359771663822422003018370769423019528588485029015526745374046316977964904657195931255912764404368321965951006839312721523813963827559536872525925566349877445020412840855276013566531119658505729490772653137482828501766690794935756813321072688051084277492010495942075420839644398858616159318346459654911214946475770065918077617931666164536730955823547115654117241274057912764935942066671832251736836733963627188213305106330064328648272252338925308465302112364269648038833630731788699806119937310521557427785739363451076470115334506834698833173394466805977582699806605699645296936843654704065336045451896856420175232112318731261169525302795582438878696844145909635734913232"

func isPrime(number int) bool {
	if number < 2 {
		return false
	}

	for i := 2; i <= int(math.Sqrt(float64(number))); i++ {
		if number%i == 0 {
			return false
		}
	}

	return true
}

// EulerPrime function to find the Xth Y digit prime number in the expansion of Euler's number.
func EulerPrime(x, y int) (int64, error) {

	// y == 20 will throw overflow error of int64
	if (x > 5 && y > 12) || (y >= 20) {
		return 0, errors.New("Input is outside supported range, try with x <= 5 and y <= 12")
	}

	for i := 0; i < len(euler)-y; i++ {
		subEulerStr := euler[i : i+y]
		subEulerNum, err := strconv.ParseInt(subEulerStr, 10, 64)

		if err != nil {
			log.Fatal(err)
		}

		if isPrime(int(subEulerNum)) {
			x--
			if x <= 0 {
				return subEulerNum, nil
			}
		}
	}

	return 0, errors.New("Euler prime not found")
}
